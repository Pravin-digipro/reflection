<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RE Website</title>

  <!-- Main CSS -->
  <link rel="stylesheet" href="./src/style.css" />

  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

  <!-- Google Analytics 4 (GA4) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-2P02HXVVK3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-2P02HXVVK3');
  </script>

  <style>
    /* ===== Swiper Styling (isolated) ===== */
    .swiper-section {
      width: 100%;
      height: 100vh;
      background: #0b0b0b;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .swiper {
      width: 90%;
      max-width: 1200px;
      height: 600px;
      border-radius: 20px;
      overflow: hidden;
    }

    .swiper-slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .swiper-button-next,
    .swiper-button-prev {
      color: #fff;
    }

    .swiper-pagination-bullet {
      background: rgba(255, 255, 255, 0.5);
    }

    .swiper-pagination-bullet-active {
      background: #fff;
    }

    /* ===== Mobile Responsive ===== */
    @media (max-width: 768px) {
      .swiper-section {
        height: auto;
        min-height: 50vh;
        padding: 20px 0;
      }

      .swiper {
        width: 95%;
        height: 300px;
        border-radius: 12px;
      }

      .swiper-button-next,
      .swiper-button-prev {
        width: 30px;
        height: 30px;
      }

      .swiper-button-next::after,
      .swiper-button-prev::after {
        font-size: 18px;
      }
    }

    @media (max-width: 480px) {
      .swiper {
        width: 98%;
        height: 220px;
        border-radius: 8px;
      }
    }
  </style>

  <style>
    .bookbody {
      margin: 0;
      background: #111;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      width: 100%;
      position: relative;
      z-index: 5;
    }

    #book {
      width: 90vw;
      max-width: 1200px;
      margin: 0 auto;
    }

    .page {
      background: #111;
    }

    .page img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      object-position: center;
    }

    /* Navigation arrows */
    .nav {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 40px;
      padding: 30px 0;
      width: 100%;
      position: relative;
      z-index: 10;
    }

    .nav button {
      background: rgba(255, 255, 255, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: #fff;
      font-size: 28px;
      width: 60px;
      height: 60px;
      cursor: pointer;
      border-radius: 50%;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .nav button:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.1);
    }

    .nav button.hidden {
      opacity: 0.2;
      pointer-events: none;
    }

    /* ===== Tablet Flipbook ===== */
    @media (max-width: 768px) {
      .bookbody {
        min-height: auto;
        padding: 20px 0;
      }

      #book {
        width: 96vw;
      }

      .nav {
        gap: 30px;
        padding: 15px 0;
      }

      .nav button {
        font-size: 22px;
        width: 44px;
        height: 44px;
      }
    }

    /* ===== Phone Flipbook ===== */
    @media (max-width: 480px) {
      .bookbody {
        padding: 10px 0;
      }

      #book {
        width: 98vw;
      }

      .nav button {
        font-size: 18px;
        width: 38px;
        height: 38px;
      }
    }
  </style>

</head>

<body>

  <!-- ================= HERO SECTION ================= -->
  <section class="container">
    <div class="overlay"></div>

    <div class="hero-1-container">
      <div class="hero-main-container">
        <img class="hero-main-logo" draggable="false"
          src="https://res.cloudinary.com/dbqjuze5g/image/upload/v1766047609/Hero_BG_1_tfpw5v.jpg" alt="Hero Logo" />

        <img class="hero-main-image" draggable="false"
          src="https://res.cloudinary.com/dbqjuze5g/image/upload/v1766047609/Hero_BG_1_tfpw5v.jpg"
          alt="Hero Background" />
      </div>

      <div class="hero-text-logo-container">
        <div class="hero-text-logo"></div>
      </div>
    </div>


    <!-- ================= MEDIA SECTION ================= -->
    <section class="hero-2-section">
      <div class="hero-2-container">

        <!-- LEFT : VIDEO -->
        <div class="hero-video">
          <video
            src="https://res.cloudinary.com/dbqjuze5g/video/upload/v1765879503/YTDown.com_YouTube_Royal-Enfield-Motoverse-2025-Day-1_Media_6O1doB0zIl4_002_720p_gryhzx.mp4"
            muted playsinline controls></video>
        </div>

        <!-- RIGHT : IMAGE -->
        <div class="hero-image">
          <img src="https://res.cloudinary.com/dbqjuze5g/image/upload/v1766060871/Group_3_oqou3k.png" alt="Poster" />
        </div>
      </div>
    </section>
  </section>

  <!-- ================= PDF FLIPBOOK SECTION ================= -->
  <div class="bookbody">
    <div id="book">
      <div class="page"><img src="./page01.jpg"></div>
      <div class="page"><img src="./page02.jpg"></div>
      <div class="page"><img src="./page03.jpg"></div>
      <div class="page"><img src="./page04.jpg"></div>
      <div class="page"><img src="./page05.jpg"></div>
      <div class="page"><img src="./page06.jpg"></div>
      <div class="page"><img src="./page07.jpg"></div>
      <div class="page"><img src="./page08.jpg"></div>
    </div>

    <!-- Arrows -->
    <div class="nav">
      <button id="prevBtn">❮</button>
      <button id="nextBtn">❯</button>
    </div>
  </div>
  <div class="swiper10">

  </div>
  <!-- ================= SWIPER SECTION ================= -->
  <section class="swiper-section">
    <div class="swiper mySwiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <img src="https://res.cloudinary.com/dbqjuze5g/image/upload/v1766236940/Marketing_1_3_ofhslx.jpg" />
        </div>
        <div class="swiper-slide">
          <img src="https://res.cloudinary.com/dbqjuze5g/image/upload/v1766236956/Marketing_2_2_a4tups.jpg" />
        </div>
        <div class="swiper-slide">
          <img src="https://res.cloudinary.com/dbqjuze5g/image/upload/v1766237047/Marketing_3_1_yzqvxa.jpg" />
        </div>
      </div>

      <!-- Controls -->
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-pagination"></div>
    </div>
  </section>

  <div class="swiper10">

  </div>

  <!-- ================= SWIPER SECTION ================= -->
  <section class="swiper-section">
    <div class="swiper mySwiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <img src="https://res.cloudinary.com/dbqjuze5g/image/upload/v1766237736/Rides_1_1_susakp.jpg" />
        </div>
        <div class="swiper-slide">
          <img src="https://res.cloudinary.com/dbqjuze5g/image/upload/v1766237739/Rides_2_1_fn56a1.jpg" />
        </div>
      </div>

      <!-- Controls -->
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-pagination"></div>
    </div>
  </section>


  <div class="swiper10">

  </div>

  <!-- Scroll Indicator -->
  <!-- ================= SWIPER SECTION ================= -->
  <section class="swiper-section">
    <div class="swiper mySwiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <img src="./Social%20Mission%201.jpg" />
        </div>
      </div>

      <!-- Controls -->
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-pagination"></div>
    </div>
  </section>

  <div class="swiper10">

  </div>
  <!-- ================= SWIPER SECTION ================= -->
  <section class="swiper-section">
    <div class="swiper mySwiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <img src="https://res.cloudinary.com/dbqjuze5g/image/upload/v1766462395/Artboard_11_ydr3c3.jpg" />
        </div>
      </div>

      <!-- Controls -->
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-pagination"></div>
    </div>
  </section>

  <div class="swiper10">

  </div>
  <!-- ================= FOOTER ================= -->
  <div class="scroll-indicator">
    <svg width="34" height="14" viewBox="0 0 34 14" fill="none">
      <path fill-rule="evenodd" clip-rule="evenodd"
        d="M33.5609 1.54346C34.0381 2.5875 33.6881 3.87821 32.7791 4.42633L17.0387 13.9181L1.48663 4.42115C0.580153 3.86761 0.235986 2.57483 0.717909 1.53365C1.19983 0.492464 2.32535 0.097152 3.23182 0.650692L17.0497 9.08858L31.051 0.64551C31.96 0.0973872 33.0837 0.499411 33.5609 1.54346Z"
        fill="currentColor" />
    </svg>
  </div>

  <!-- ================= SCRIPTS ================= -->
  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <script src="./src/script.js"></script>

  <!-- Swiper JS -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>



  <!--swiper funtion-->
  <script>
    const swipers = document.querySelectorAll(".mySwiper");
    swipers.forEach((el, index) => {
      const swiper = new Swiper(el, {
        loop: false,
        speed: 900,
        grabCursor: true,
        pagination: {
          el: el.querySelector(".swiper-pagination"),
          clickable: true,
        },
        navigation: {
          nextEl: el.querySelector(".swiper-button-next"),
          prevEl: el.querySelector(".swiper-button-prev"),
        },
      });

      // Tracking slide change (only if > 1 slide)
      swiper.on('slideChange', function () {
        if (this.slides.length > 1) {
          gtag('event', 'carousel_slide_change', {
            'carousel_index': index,
            'active_slide_index': this.activeIndex
          });
        }
      });
    });
  </script>

  <!-- PageFlip JS -->
  <script src="https://cdn.jsdelivr.net/npm/page-flip/dist/js/page-flip.browser.min.js"></script>

  <script>
    function initFlipbook() {
      const bookEl = document.getElementById("book");
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");

      if (!bookEl || !prevBtn || !nextBtn) return;

      // Use the container's actual rendered width to calculate page size
      const containerW = bookEl.clientWidth || 1200;
      const pageW = Math.floor(containerW / 2);
      const pageH = Math.floor(pageW * 1.09);

      const pageFlip = new St.PageFlip(bookEl, {
        width: pageW,
        height: pageH,
        size: "stretch",
        showCover: false,
        maxShadowOpacity: 0.5,
        mobileScrollSupport: true,
        useMouseEvents: true,
        flippingTime: 800
      });

      pageFlip.loadFromHTML(document.querySelectorAll(".page"));

      prevBtn.onclick = () => pageFlip.flipPrev();
      nextBtn.onclick = () => pageFlip.flipNext();

      function updateArrows() {
        const current = pageFlip.getCurrentPageIndex();
        const total = pageFlip.getPageCount();
        prevBtn.classList.toggle("hidden", current === 0);
        nextBtn.classList.toggle("hidden", current >= total - 2);
      }

      updateArrows();
      pageFlip.on("flip", (e) => {
        updateArrows();
        // Tracking flipbook page change
        gtag('event', 'flipbook_page_change', {
          'page_index': e.data
        });
      });
    }

    if (document.readyState === 'complete') {
      initFlipbook();
    } else {
      window.addEventListener('load', initFlipbook);
    }

    // ================= TRACKING ADDITIONS =================
    document.addEventListener('DOMContentLoaded', () => {

      // A) Video Play Tracking
      const video = document.querySelector('.hero-video video');
      if (video) {
        video.addEventListener('play', () => {
          gtag('event', 'video_play');
        });
      }

      // D) Section Visibility Tracking (IntersectionObserver)
      const sections = document.querySelectorAll('section, .bookbody');
      const trackedSections = new Set();

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && entry.intersectionRatio >= 0.5) {
            const id = entry.target.id || entry.target.className;
            if (!trackedSections.has(id)) {
              gtag('event', 'section_view', {
                'section_id': id
              });
              trackedSections.add(id);
            }
          }
        });
      }, {
        threshold: 0.5
      });

      sections.forEach(section => {
        observer.observe(section);
      });

    });
  </script>


</body>

</html>